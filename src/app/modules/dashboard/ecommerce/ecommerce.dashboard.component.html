<div class="layout-dashboard p-4">
    <div class="grid">
        <ng-template [ngIf]="session.userLogged.role.operationArea !== 'SUPER_ADMIN'">
            <div class="col-12 md:col-6 xl:col-3" *ngFor="let metric of metrics">
                <div class="card shadow-1 flex flex-column" [style.borderColor]="metric.color_light"
                     [style]="{'border-color': metric.color_light, 'border-left': '4px solid'}">
                    <div class="flex align-items-center">
                        <div class="flex justify-content-center align-items-center p-2 border-round"
                             [style.backgroundColor]="metric.color_light">
                            <i [class]="metric.icon" [style.color]="metric.color_dark"></i>
                        </div>
                        <span class="text-xl ml-2 font-semibold"
                              [style.color]="metric.color_light">{{ metric.title }}</span>
                    </div>

                    <div class="grid mt-3">
                        <div class="col-6 flex flex-column p-3 text-center"
                             *ngFor="let content of metric.textContent; let i = index"
                             [class]="i === 0 ? 'border-right-1 surface-border' : '' ">
                            <span class="text-color text-2xl font-semibold">{{ content.amount }}</span>
                            <span class="text-color font-semibold">{{ content.text }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </ng-template>
        <div class="col-12 xl:col-4">
            <div class="card h-full">
                <h4 class="white-space-nowrap mb-2">Expenses</h4>
                <div class="flex gap-3 w-full mt-4 align-items-center" *ngFor="let expense of expenses">
                    <img [src]="'assets/demo/images/dashboard/'+ expense.image + '.svg'" [alt]="expense.title"
                         class="w-3rem h-3rem">
                    <div class="w-full">
                        <div class="flex flex-wrap w-full justify-content-between align-items-center">
                            <span class="font-semibold">{{ expense.title }}</span>
                            <div class="flex">
                                <span
                                    class="font-semibold text-color-secondary pr-2 border-right-2 surface-border text-sm">{{ expense.value }}
                                    %</span>

                                <span class="font-semibold ml-2 text-sm">{{ expense.amount }}</span>
                            </div>
                        </div>
                        <div class="border-round w-full overflow-hidden mt-2"
                             style="height:7px; background-color: var(--surface-border)">
                            <div class="border-left-round h-full" [style.background]="expense.background"
                                 [style.width]="expense.value + '%'"></div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="col-12 xl:col-4">
            <div class="card">
                <div class="flex justify-content-between">
                    <h4>Produtos com baixo estoque</h4>
                </div>

                <p-table [value]="store.listEntities$()" [paginator]="true" [rows]="10" responsiveLayout="scroll">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Nome</th>
                            <th class="text-center">Estoque</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-product>
                        <tr>
                            <td>
                                <span class="p-column-title">Category</span>
                                {{ product.name }}
                            </td>
                            <td class="text-center">
                                <span class="p-column-title">Price</span>
                                {{ product.stockAmount }}
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                        <tr>
                            <td colspan="5">No customers found.</td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
        <div class="col-12 xl:col-4">
            <div class="card">
                <h4>Produtos mais vendidos</h4>
                <p>Produtos mais populares da sua inventario.</p>

                <ul class="list-none p-0 m-0">
                    <li class="p-3 surface-border border-bottom-1 flex justify-content-between align-items-center">
                        <span class="font-bold">Product</span>
                        <span class="font-bold">Sales</span>
                    </li>
                    <li *ngFor="let product of productsBestSellers; let i = index;" class="p-3 surface-border"
                        [ngClass]="{'border-bottom-1': i !== 6}">
                        <div class="flex justify-content-between align-items-center">
                            <div class="flex gap-3 align-items-center">
                                <img [src]="'assets/demo/images/product/'+ product.image" class="w-5rem h-3rem shadow-5"
                                     alt="product.name">
                                <span>{{ product.name }}</span>
                            </div>
                            <span class="font-semibold">{{ product.price }}</span>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div class="col-12 lg:col-4">
            <div class="card mt-3">
                <h4>Tasks</h4>
                <p>Overview of your pending tasks.</p>
                <div class="mt-4">
                    <span class="block mb-2"><span class="font-semibold">12 Orders</span> to fulfill</span>
                    <div class="w-full border-round" style="height: 7px; background-color: var(--surface-d)">
                        <div class="w-7 h-full border-round" style="background-color: #64B5F6"></div>
                    </div>
                </div>
                <div class="mt-4">
                    <span class="block mb-2"><span class="font-semibold">40+ Payments</span> to withdraw</span>
                    <div class="w-full border-round" style="height: 7px; background-color: var(--surface-d)">
                        <div class="w-5 h-full border-round" style="background-color: #A5D6A7"></div>
                    </div>
                </div>
                <div class="mt-4">
                    <span class="block mb-2"><span class="font-semibold">4 Repors</span> to revise</span>
                    <div class="w-full border-round" style="height: 7px; background-color: var(--surface-d)">
                        <div class="w-8 h-full border-round" style="background-color: #7986CB"></div>
                    </div>
                </div>
                <div class="mt-4">
                    <span class="block mb-2"><span class="font-semibold">6 Questions</span> to respond</span>
                    <div class="w-full border-round" style="height: 7px; background-color: var(--surface-d)">
                        <div class="w-4 h-full border-round" style="background-color: #9575CD"></div>
                    </div>
                </div>
                <div class="mt-4">
                    <span class="block mb-2"><span class="font-semibold">2 Chargebacks</span> to review</span>
                    <div class="w-full border-round" style="height: 7px; background-color: var(--surface-d)">
                        <div class="w-6 h-full border-round" style="background-color: #4DB6AC"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 lg:col-8">
            <div class="card mt-3">
                <h4>Revenue stream</h4>
                <p>Comparison of your revenue sources.</p>
                <div class="flex justify-content-center align-items-center">
                    <p-chart type="pie" [data]="revenueChart" [options]="revenueChartOptions"
                             [style]="{'width': '50%'}"></p-chart>
                </div>
            </div>

            <div class="card mt-3">
                <h4>Team Members</h4>
                <ul class="list-none p-0 m-0">
                    <li *ngFor="let member of teamMembers; let i = index;" class="p-3 surface-border"
                        [ngClass]="{'border-bottom-1': i !== 4}">
                        <div class="flex justify-content-between align-items-center">
                            <div class="flex gap-2 align-items-center">
                                <img [src]="'assets/demo/images/avatar/'+ member.image +'.png'"
                                     class="w-4rem h-4rem border-circle" alt="member.name">
                                <div>
                                    <span class="block text-xl font-bold">{{ member.name }}</span>
                                    <span class="block">{{ member.desc }}</span>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button pButton class="p-button-icon-only p-button-rounded p-button-success"
                                        icon="pi pi-envelope"></button>
                                <button pButton class="p-button-icon-only p-button-rounded p-button-warning"
                                        icon="pi pi-cog"></button>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>

</div>
